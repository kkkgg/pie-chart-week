<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ›œæ—¥ã‚ˆã†ã³</title>
    <style>
        body {
            display: grid;
            place-items: center;
            min-height: 95vh;
            background-color: #333;
            font-family: 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif;
            color: white;
        }

        .pie-container {
            width: 400px;
            height: 400px;
            /* ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ãªã©å¹…ãŒç‹­ã„å ´åˆã¯ç”»é¢å¹…ã«åˆã‚ã›ã‚‹ */
            max-width: 90vw;
            max-height: 90vw;
        }

        .pie-chart {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            
            /* * èƒŒæ™¯ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯JavaScriptã§å‹•çš„ã«è¨­å®šã—ã¾ã™ 
             * (ä¾‹: background: conic-gradient(red 0% 14.28%, blue 14.28% 28.56%, ...);)
             */
            background: #555; /* JSèª­ã¿è¾¼ã¿å‰ã®è‰² */

            border: 6px solid #f0f0f0;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5),
                        inset 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .day-label {
            position: absolute;
            /* JSã§ (top: 50%, left: 50%) ã‹ã‚‰ã®ç›¸å¯¾ä½ç½®ã‚’è¨ˆç®—ã—ã¾ã™ */
            top: 50%;
            left: 50%;

            /* * CSSå¤‰æ•° --x ã¨ --y ã‚’JSã‹ã‚‰è¨­å®šã—ã¾ã™ã€‚
             * translate(-50%, -50%) ã§ã€è¦ç´ è‡ªèº«ã®ä¸­å¿ƒã‚’ (x, y) åº§æ¨™ã«åˆã‚ã›ã¾ã™ã€‚
             */
            transform: translate(var(--x, 0px), var(--y, 0px)) translate(-50%, -50%);
            
            /* ãƒ†ã‚­ã‚¹ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
            font-size: 2.1rem;
            font-weight: bold;
            padding: 8px 14px;
            border-radius: 8px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
            
            /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
            transition: transform 0.3s ease-out, 
                        box-shadow 0.3s ease-out, 
                        border 0.3s ease-out;
        }

        /* --- ä»Šæ—¥ã®æ›œæ—¥ã‚’ç›®ç«‹ãŸã›ã‚‹ã‚¹ã‚¿ã‚¤ãƒ« --- */
        .day-label.today {
            /* * transformã‚’ä¸Šæ›¸ãã—ã€scale(1.25) ã‚’è¿½åŠ ã—ã¾ã™
             * ã“ã‚Œã«ã‚ˆã‚Šã€å…ƒã®ä½ç½®ã‚’ä¿ã£ãŸã¾ã¾æ‹¡å¤§ã•ã‚Œã¾ã™
             */
            transform: translate(var(--x, 0px), var(--y, 0px)) translate(-50%, -50%) scale(1.25);
            
            z-index: 10;
            border: 2px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.7);
        }

    </style>
</head>
<body>

    <h1>æ›œæ—¥ã‚ˆã†ã³</h1>
    <div class="pie-container">
        <div class="pie-chart" id="pie-chart"></div>
    </div>

    <script>
        // DOMãŒèª­ã¿è¾¼ã¾ã‚ŒãŸã‚‰å®Ÿè¡Œ
        document.addEventListener('DOMContentLoaded', () => {

            // --- 1. å®šç¾© ---
            
            // æ›œæ—¥ã®å®šç¾©ï¼ˆæœˆæ›œå§‹ã¾ã‚Šï¼‰ã¨ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼
            const days = [
                { name: 'ğŸŒ›æœˆğŸ«  ', color: '#f0e68c', textColor: '#333' }, // æœˆ (Moon)ğŸŒ™
                { name: 'ğŸ”¥ç«ğŸ«', color: '#ff6347', textColor: '#fff' }, // ç« (Fire)
                { name: 'ğŸ’§æ°´ğŸ«', color: '#4682b4', textColor: '#fff' }, // æ°´ (Water)
                { name: 'ğŸŒ³æœ¨ğŸ«', color: '#2e8b57', textColor: '#fff' }, // æœ¨ (Wood)
                { name: 'ğŸ’°é‡‘ğŸ«ğŸ¶', color: '#ffd700', textColor: '#333' }, // é‡‘ (Gold)d)ğŸª™
                { name: 'â›°ï¸åœŸ', color: '#8b4513', textColor: '#fff' }, // åœŸ (Earth)
                { name: 'ğŸŒæ—¥', color: '#ffa500', textColor: '#fff' }  // æ—¥ (Sun)â˜€ï¸
            ];

            const pieChart = document.getElementById('pie-chart');
            const segmentAngle = 360 / 7; // 1ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚ãŸã‚Šã®è§’åº¦ (ç´„51.43åº¦)

            // ç¾åœ¨ã®æ›œæ—¥ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä¿æŒï¼ˆåˆ‡ã‚Šæ›¿ã‚ã‚Šæ¤œçŸ¥ç”¨ï¼‰
            let currentDayIndex = -1;

            // --- 2. æç”»é–¢æ•° ---
            function updateChart() {
                const now = new Date();
                const jsDay = now.getDay(); // 0=æ—¥æ›œ, 1=æœˆæ›œ, ..., 6=åœŸæ›œ
                
                // JSã®æ›œæ—¥ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹(0=æ—¥)ã‚’ã€daysé…åˆ—(0=æœˆ)ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«å¤‰æ›
                const todayIndex = (jsDay === 0) ? 6 : jsDay - 1;

                // æ—¥ä»˜ãŒå¤‰ã‚ã£ã¦ã„ãªã„å ´åˆã¯ä½•ã‚‚ã—ãªã„ (ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ãŸã‚)
                if (todayIndex === currentDayIndex) {
                    return;
                }
                currentDayIndex = todayIndex;
                console.log(`æ—¥ä»˜ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ: ${days[todayIndex].name}æ›œæ—¥`);

                // ä»¥å‰ã®ãƒ©ãƒ™ãƒ«ã‚’ã‚¯ãƒªã‚¢
                pieChart.innerHTML = '';
                
                // --- 2a. å††ã‚°ãƒ©ãƒ•ã®èƒŒæ™¯è‰² (conic-gradient) ã‚’è¨­å®š ---
                let gradientString = 'conic-gradient(';
                let currentAngle = 0;
                
                days.forEach(day => {
                    const nextAngle = currentAngle + segmentAngle;
                    // ä¾‹: "red 0deg 51.43deg, "
                    gradientString += `${day.color} ${currentAngle}deg ${nextAngle}deg, `;
                    currentAngle = nextAngle;
                });
                
                // æœ€å¾Œã® ", " ã‚’å‰Šé™¤ã—ã¦é–‰ã˜æ‹¬å¼§ã‚’è¿½åŠ 
                gradientString = gradientString.slice(0, -2) + ')';
                pieChart.style.background = gradientString;

                
                // --- 2b. ãƒ©ãƒ™ãƒ«ã‚’é…ç½® ---
                
                // å††ã®ä¸­å¿ƒã‹ã‚‰ãƒ©ãƒ™ãƒ«ã¾ã§ã®è·é›¢ï¼ˆåŠå¾„ã®65%ã®ä½ç½®ï¼‰
                const radius = pieChart.offsetWidth / 2 * 0.65;

                days.forEach((day, index) => {
                    const label = document.createElement('div');
                    label.classList.add('day-label');
                    label.textContent = day.name;
                    label.style.color = day.textColor;

                    // ãƒ©ãƒ™ãƒ«ã‚’é…ç½®ã™ã‚‹è§’åº¦ã‚’è¨ˆç®—
                    // ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®çœŸã‚“ä¸­ã«é…ç½® (index * è§’åº¦ + è§’åº¦/2)
                    const cssAngleDeg = (index * segmentAngle) + (segmentAngle / 2);
                    
                    // ä¸‰è§’é–¢æ•° (sin, cos) ã®ãŸã‚ã®è§’åº¦ã«å¤‰æ› (0åº¦ãŒå³æ–¹å‘ã«ãªã‚‹)
                    // CSSã®è§’åº¦(0åº¦ãŒä¸Š)ã‹ã‚‰90åº¦å¼•ã
                    const mathAngleRad = (cssAngleDeg - 90) * (Math.PI / 180);

                    // X, Yåº§æ¨™ã‚’è¨ˆç®—
                    const x = Math.cos(mathAngleRad) * radius;
                    const y = Math.sin(mathAngleRad) * radius;
                    
                    // CSSå¤‰æ•°ã«ã‚»ãƒƒãƒˆ
                    label.style.setProperty('--x', `${x}px`);
                    label.style.setProperty('--y', `${y}px`);

                    // ä»Šæ—¥ã®æ›œæ—¥ã« .today ã‚¯ãƒ©ã‚¹ã‚’ä»˜ä¸
                    if (index === todayIndex) {
                        label.classList.add('today');
                    }
                    
                    pieChart.appendChild(label);
                });
            }

            // --- 3. å®Ÿè¡Œ ---
            
            // æœ€åˆã«ä¸€åº¦å®Ÿè¡Œ
            updateChart();
            
            // 1åˆ†ã”ã¨ã«æ›œæ—¥ãŒå¤‰ã‚ã£ã¦ã„ãªã„ã‹ãƒã‚§ãƒƒã‚¯
            // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ã‚’æ±‚ã‚ãªã„ãªã‚‰ã€ã‚‚ã£ã¨é–“éš”ã‚’é•·ãã—ã¦ã‚‚OK
            setInterval(updateChart, 60000); 

            // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºãŒå¤‰ã‚ã£ãŸæ™‚ã‚‚å†æç”»ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œï¼‰
            window.addEventListener('resize', updateChart);
        });
    </script>

</body>
</html>
